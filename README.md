# Hotel Booking API

## Описание проекта

REST-приложение для бронирования комнат в отеле.

Приложение реализует полноценный backend-сервис с авторизацией,
фильтрацией, поиском свободных комнат и защитой от пересекающихся
бронирований.

------------------------------------------------------------------------

## Стек технологий

-   Python 3.x
-   Django
-   Django REST Framework
-   PostgreSQL
-   django-filter
-   drf-spectacular (Swagger / OpenAPI документация)
-   flake8 (линтер)
-   black и isort (автоформатирование)

------------------------------------------------------------------------

## Реализованный функционал

### Комнаты

-   Поля: название (номер), стоимость за сутки, количество мест
-   Просмотр без авторизации
-   Фильтрация по цене
-   Фильтрация по количеству мест
-   Сортировка
-   Поиск свободных комнат по датам

### Бронирование

-   Создание брони только для авторизованных пользователей
-   Проверка корректности дат
-   Запрет пересечения бронирований
-   Отмена брони пользователем
-   Просмотр только своих бронирований

### Админ-панель

-   CRUD для комнат
-   Управление бронированиями

### Авторизация

-   Регистрация
-   Логин / Логаут
-   Ограничение доступа к созданию бронирований

------------------------------------------------------------------------

## API Endpoints

### Комнаты

``` http
GET /api/rooms/
```

Фильтрация:

``` http
GET /api/rooms/?price_per_day__gte=100
GET /api/rooms/?capacity=2
```

Сортировка:

``` http
GET /api/rooms/?ordering=price_per_day
GET /api/rooms/?ordering=-capacity
```

Поиск свободных:

``` http
GET /api/rooms/available/?start_date=2026-03-01&end_date=2026-03-05
```

------------------------------------------------------------------------

### Бронирования

``` http
GET /api/bookings/
POST /api/bookings/
POST /api/bookings/{id}/cancel/
```

------------------------------------------------------------------------

### Авторизация

``` http
POST /api/register/
POST /api/login/
POST /api/logout/
```

------------------------------------------------------------------------

## Документация API

Swagger доступен по адресу:

``` http
/api/docs/
```

------------------------------------------------------------------------

## Автотесты

Запуск тестов:

``` bash
python manage.py test
```

------------------------------------------------------------------------

## Настройка PostgreSQL

Перед запуском проекта необходимо установить и настроить PostgreSQL.

### Установка

Скачайте PostgreSQL с официального сайта:

https://www.postgresql.org/download/

Убедитесь, что служба PostgreSQL запущена.

------------------------------------------------------------------------

### Создание базы данных

Подключитесь к PostgreSQL:

``` bash
psql -U postgres
```

Создайте базу данных:

``` sql
CREATE DATABASE hotel_db;
```

Создайте пользователя (рекомендуется):

``` sql
CREATE USER hotel_user WITH PASSWORD 'ВАШ_ПАРОЛЬ';
GRANT ALL PRIVILEGES ON DATABASE hotel_db TO hotel_user;
```

Выйти из psql:

``` sql
\q
```

------------------------------------------------------------------------

## Переменные окружения (.env)

Проект использует файл `.env` для хранения конфигурации.

Пример `.env` файла:

``` env
DEBUG=True
ALLOWED_HOSTS=127.0.0.1,localhost
SECRET_KEY=your-secret-key

DB_NAME=hotel_db
DB_USER=hotel_user
DB_PASSWORD=ВАШ_ПАРОЛЬ
DB_HOST=localhost
DB_PORT=5432
```

В `settings.py` переменные считываются из окружения.

Важно: файл `.env` не должен попадать в репозиторий (добавлен в
`.gitignore`).

------------------------------------------------------------------------

## Установка и запуск

### 1. Клонировать репозиторий

``` bash
git clone <repository_url>
cd hotel
```

### 2. Создать виртуальное окружение

``` bash
python -m venv venv
```

Активация:

Windows:

``` bash
venv\Scripts\activate
```

Linux / Mac:

``` bash
source venv/bin/activate
```

### 3. Установить зависимости

``` bash
pip install -r requirements.txt
```

### 4. Создать файл .env

Создайте `.env` в корне проекта и заполните переменные окружения.

### 5. Применить миграции

``` bash
python manage.py migrate
```

### 6. Создать суперпользователя

``` bash
python manage.py createsuperuser
```

### 7. Запустить сервер

``` bash
python manage.py runserver
```

Приложение будет доступно:

``` http
http://127.0.0.1:8000/
```

------------------------------------------------------------------------

## Качество кода

Линтер:

``` bash
flake8 .
```

Автоформатирование:

``` bash
black .
isort .
```





